# We include setups for
#	Gecko EMF OSGi - geckoEMF
#	OSGi-Test Support - gecko-osgitest
#	DIMC Github-Configuration - gecko-dimc
#	Jacoco Support - gecko-jacoco
-library: \
	geckoEMF,\
	geckoOSGi-Test,\
	geckoDIMC,\
	geckoJacoco

# Needed because we enabled library 'gecko-dimc' 	
github-project: org.gecko.emf.util
base-version: 2.1.0.SNAPSHOT

# Maven Central Group-Id
-groupid: org.geckoprojects.emf.utils

# No simultanious release - We only release new version to Maven Central
releaseNotNeeded: ${findproviders;osgi.identity;(&(osgi.identity=${bsn})(version=${versionmask;===;${Bundle-Version}}));REPOS}

# If release not needed is empty, no Bundle has been found and for maven we do a release to the remote Repo. If not, we only do a release to the local .m2 Repo
-maven-release.local: ${if;${def;releaseNotNeeded};local;remote}

javac.source: 11
javac.target: 11

-require-bnd "(version>=6.4.0)"

-plugin.Central: \
    aQute.bnd.repository.maven.provider.MavenBndRepository; \
        snapshotUrl="https://oss.sonatype.org/content/repositories/snapshots/"; \
        releaseUrl=https://repo.maven.apache.org/maven2/; \
        index=${.}/central.mvn; \
        readOnly=true; \
        name="Central"

-plugin.Local: \
	aQute.bnd.deployer.repository.LocalIndexedRepo; \
		name = Local; \
		pretty = true; \
		local = ${build}/local

-plugin.Temp: \
	aQute.bnd.deployer.repository.LocalIndexedRepo; \
		name = Temp; \
		pretty = true; \
		local = ${build}/cache/temp
		
-plugin.baseline:\
    aQute.bnd.repository.maven.provider.MavenBndRepository; \
        snapshotUrl="https://oss.sonatype.org/content/repositories/snapshots/"; \
        releaseUrl=https://repo.maven.apache.org/maven2/; \
        index=${.}/baseline.mvn; \
        readOnly=true;\
		name=Baseline

-diffignore: *.xml,\
	*/pom.properties,\
	Git-SHA,\
	Bundle-Vendor,\
	Bundle-License,\
	Bundle-DocURL,\
	Bundle-SCM,\
	Bundle-Developers,\
	Bundle-Copyright,\
	Bundle-ContactAddress,\
	META-INF/maven/*,\
	OSGI-OPT/*
		
#-baselinerepo: Baseline
#-baseline: *

#X-Test: ${if;${def;releaseNotNeeded};local;remote}
X-Test: ${-maven-release.local}
X-Test2: ${-maven-release}

-jpms-module-info:
